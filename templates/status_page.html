<h1>Status do Servidor</h1>

{% if error %}
    <p style="color:red;">Erro: {{ error }}</p>
{% else %}
    <h3>CPU:</h3>
    <pre>{{ status.cpu }}</pre>

    <h3>Memória:</h3>
    <pre>
    {% for line in status.mem %}
{{ line }}
    {% endfor %}
    </pre>

    <h3>GPU:</h3>
    <table class="table table-sm table-bordered">
        <thead>
            <tr>
                <th>Nome</th><th>Memória Total (MiB)</th><th>Memória Livre (MiB)</th><th>Utilização (%)</th>
            </tr>
        </thead>
        <tbody>
        {% for gpu in status.gpu %}
            <tr>
                <td>{{ gpu.name }}</td>
                <td>{{ gpu.memory_total }}</td>
                <td>{{ gpu.memory_free }}</td>
                <td>{{ gpu.utilization }}</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

    <h3>Disco:</h3>
    <table class="table table-sm table-bordered">
        <thead>
            <tr>
            {% for col in status.disk.header %}
                <th>{{ col }}</th>
            {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for row in status.disk.rows %}
                <tr>
                {% for item in row %}
                    <td>{{ item }}</td>
                {% endfor %}
                </tr>
            {% endfor %}
        </tbody>
    </table>
{% endif %}

<h3>Status dos Jobs</h3>
<p>Jobs rodando: <strong>{{ running_jobs }}</strong></p>
<p>Jobs na fila: <strong>{{ pending_jobs }}</strong></p>

<h3>Fila de Espera</h3>
{% if queue_jobs %}
    <ul>
    {% for job in queue_jobs %}
        <li>{{ job }}</li>
    {% endfor %}
    </ul>
{% else %}
    <p>Nenhum job na fila.</p>
{% endif %}